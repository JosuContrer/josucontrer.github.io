(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{78:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return d})),n.d(t,"metadata",(function(){return m})),n.d(t,"rightToc",(function(){return f})),n.d(t,"default",(function(){return v}));var o=n(2),r=n(6),a=n(0),i=n.n(a),c=n(82),l=n(85),u=n(84),p=Object(l.a)((function(){var e=Object(a.useState)(!1),t=e[0],n=e[1],o=function(){return n(!1)};return i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"button",onClick:function(){return n((function(e){return!e}))}},"Controlled Popup"),i.a.createElement(u.a,{open:t,closeOnDocumentClick:!0,onClose:o},i.a.createElement("div",{className:"modal"},i.a.createElement("a",{className:"close",onClick:o},"\xd7"),"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae magni omnis delectus nemo, maxime molestiae dolorem numquam mollitia, voluptate ea, accusamus excepturi deleniti ratione sapiente! Laudantium, aperiam doloribus. Odit, aut.")))})),s=Object(l.a)((function(){var e=Object(a.useRef)();return i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"button",onClick:function(){return e.current.open()}},"open"),i.a.createElement("button",{type:"button",className:"button",onClick:function(){return e.current.close()}},"close"),i.a.createElement("button",{type:"button",className:"button",onClick:function(){return e.current.toggle()}},"toggle"),i.a.createElement(u.a,{ref:e,closeOnDocumentClick:!1,trigger:i.a.createElement("button",{type:"button",className:"button"},"I am the trigger")},i.a.createElement("div",null,"Lorem ipsum dolor sit")))})),d={id:"controlled",slug:"controlled-popup",hide_title:!0,sidebar_label:"Controlled Popup",title:"Controlled Popup",description:"A Simple React popup component. Use it as a tooltip, modal, sub-menu and match more, In this Tuto, we introduce how you can create a controlled popup, so you can control you popup state completely ..."},m={unversionedId:"controlled",id:"controlled",isDocsHomePage:!1,title:"Controlled Popup",description:"A Simple React popup component. Use it as a tooltip, modal, sub-menu and match more, In this Tuto, we introduce how you can create a controlled popup, so you can control you popup state completely ...",source:"@site/docs/controlled-popup.mdx",slug:"/controlled-popup",permalink:"/controlled-popup",editUrl:"https://github.com/yjose/reactjs-popup/edit/master/docs/docs/docs/controlled-popup.mdx",version:"current",sidebar_label:"Controlled Popup",sidebar:"someSidebar",previous:{title:"React Menu",permalink:"/react-menu"},next:{title:"Nested React Tooltip",permalink:"/nested-react-tooltip"}},f=[{value:"Using <code>open</code> prop",id:"using-open-prop",children:[]},{value:"Using ref to access Popup actions",id:"using-ref-to-access-popup-actions",children:[]}],b={rightToc:f};function v(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(o.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"controlled-react-popup"},"Controlled React Popup"),Object(c.b)("h3",{id:"using-open-prop"},"Using ",Object(c.b)("inlineCode",{parentName:"h3"},"open")," prop"),Object(c.b)("p",null,"As we already mentioned in the Component API section, you can create a controlled popup component by using the ",Object(c.b)("inlineCode",{parentName:"p"},"open")," prop like the following :"),Object(c.b)(p,{mdxType:"ControlledPopup"}),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),'import React, { useState } from \'react\';\nimport Warper from \'./Warper\';\nimport Popup from \'reactjs-popup\';\n//\n\nconst ControlledPopup = () => {\n  const [open, setOpen] = useState(false);\n  const closeModal = () => setOpen(false);\n  return (\n    <div>\n      <button type="button" className="button" onClick={() => setOpen(o => !o)}>\n        Controlled Popup\n      </button>\n      <Popup open={open} closeOnDocumentClick onClose={closeModal}>\n        <div className="modal">\n          <a className="close" onClick={closeModal}>\n            &times;\n          </a>\n          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae magni\n          omnis delectus nemo, maxime molestiae dolorem numquam mollitia, voluptate\n          ea, accusamus excepturi deleniti ratione sapiente! Laudantium, aperiam\n          doloribus. Odit, aut.\n        </div>\n      </Popup>\n    </div>\n  );\n};\n')),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(o.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(o.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(o.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"It's important to mention that the controlled popup works for modal only and I think it does not make sense to use a controlled popup for tooltip and menu because we need the trigger element to calculate popup position."))),Object(c.b)("h3",{id:"using-ref-to-access-popup-actions"},"Using ref to access Popup actions"),Object(c.b)("p",null,"You can use Ref to access to Popup actions ",Object(c.b)("inlineCode",{parentName:"p"},"open"),", ",Object(c.b)("inlineCode",{parentName:"p"},"close"),", ",Object(c.b)("inlineCode",{parentName:"p"},"toggle")),Object(c.b)(s,{mdxType:"ControlledRefPopup"}),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),'import React, { useRef } from \'react\';\nimport Warper from \'./Warper\';\nimport Popup from \'reactjs-popup\';\n//\n\nconst ControlledRefPopup = () => {\n  const ref = useRef();\n  const openTooltip = () => ref.current.open();\n  const closeTooltip = () => ref.current.close();\n  const toggleTooltip = () => ref.current.toggle();\n\n  return (\n    <div>\n      <button type="button" className="button" onClick={openTooltip}>\n        open\n      </button>\n      <button type="button" className="button" onClick={closeTooltip}>\n        close\n      </button>\n\n      <button type="button" className="button" onClick={toggleTooltip}>\n        toggle\n      </button>\n      <Popup\n        ref={ref}\n        trigger={\n          <button type="button" className="button">\n            I am the trigger\n          </button>\n        }\n      >\n        <div>Lorem ipsum dolor sit</div>\n      </Popup>\n    </div>\n  );\n};\n')))}v.isMDXComponent=!0},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return f}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=r.a.createContext({}),p=function(e){var t=r.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},s=function(e){var t=p(e.components);return r.a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),s=p(n),m=o,f=s["".concat(i,".").concat(m)]||s[m]||d[m]||a;return n?r.a.createElement(f,c(c({ref:t},u),{},{components:n})):r.a.createElement(f,c({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var u=2;u<a;u++)i[u]=n[u];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},84:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(20),i=n.n(a);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var l={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},u=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],p=function(e,t,n,o,r){var a=r.offsetX,i=r.offsetY,c=o?8:0,l=n.split(" "),u=e.top+e.height/2,p=e.left+e.width/2,s=t.height,d=t.width,m=u-s/2,f=p-d/2,b="",v="0%",g="0%";switch(l[0]){case"top":m-=s/2+e.height/2+c,b="rotate(180deg)  translateX(50%)",v="100%",g="50%";break;case"bottom":m+=s/2+e.height/2+c,b="rotate(0deg) translateY(-100%) translateX(-50%)",g="50%";break;case"left":f-=d/2+e.width/2+c,b=" rotate(90deg)  translateY(50%) translateX(-25%)",g="100%",v="50%";break;case"right":f+=d/2+e.width/2+c,b="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(l[1]){case"top":m=e.top,v=e.height/2+"px";break;case"bottom":m=e.top-s+e.height,v=s-e.height/2+"px";break;case"left":f=e.left,g=e.width/2+"px";break;case"right":f=e.left-d+e.width,g=d-e.width/2+"px"}return{top:m="top"===l[0]?m-i:m+i,left:f="left"===l[0]?f-a:f+a,transform:b,arrowLeft:g,arrowTop:v}},s=function(e,t,n,o,r,a){var i=r.offsetX,c=r.offsetY,l={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},s=0,d=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var n=document.querySelector(e);0,null!==n&&(t=n.getBoundingClientRect())}return t}(a),m=Array.isArray(n)?n:[n];for((a||Array.isArray(n))&&(m=[].concat(m,u));s<m.length;){var f={top:(l=p(e,t,m[s],o,{offsetX:i,offsetY:c})).top,left:l.left,width:t.width,height:t.height};if(!(f.top<=d.top||f.left<=d.left||f.top+f.height>=d.top+d.height||f.left+f.width>=d.left+d.width))break;s++}return l},d=0,m=Object(o.forwardRef)((function(e,t){var n=e.trigger,a=void 0===n?null:n,u=e.onOpen,p=void 0===u?function(){}:u,m=e.onClose,f=void 0===m?function(){}:m,b=e.defaultOpen,v=void 0!==b&&b,g=e.open,y=void 0===g?void 0:g,h=e.disabled,O=void 0!==h&&h,w=e.nested,j=void 0!==w&&w,E=e.closeOnDocumentClick,k=void 0===E||E,C=e.repositionOnResize,x=void 0===C||C,N=e.closeOnEscape,P=void 0===N||N,T=e.on,R=void 0===T?["click"]:T,L=e.contentStyle,A=void 0===L?{}:L,S=e.arrowStyle,D=void 0===S?{}:S,M=e.overlayStyle,I=void 0===M?{}:M,X=e.className,z=void 0===X?"":X,B=e.position,Y=void 0===B?"bottom center":B,U=e.modal,F=void 0!==U&&U,H=e.lockScroll,q=void 0!==H&&H,W=e.arrow,_=void 0===W||W,J=e.offsetX,K=void 0===J?0:J,V=e.offsetY,G=void 0===V?0:V,Q=e.mouseEnterDelay,Z=void 0===Q?100:Q,$=e.mouseLeaveDelay,ee=void 0===$?100:$,te=e.keepTooltipInside,ne=void 0!==te&&te,oe=e.children,re=Object(o.useState)(y||v),ae=re[0],ie=re[1],ce=Object(o.useRef)(null),le=Object(o.useRef)(null),ue=Object(o.useRef)(null),pe=Object(o.useRef)(null),se=Object(o.useRef)("popup-"+ ++d),de=!!F||!a,me=Object(o.useRef)(0);Object(o.useLayoutEffect)((function(){return ae?(pe.current=document.activeElement,Ce(),je(),Oe()):we(),function(){clearTimeout(me.current)}}),[ae]),Object(o.useEffect)((function(){"boolean"==typeof y&&(y?fe():be())}),[y,O]);var fe=function(){ae||O||(ie(!0),setTimeout(p,0))},be=function(){ae&&!O&&(ie(!1),de&&pe.current.focus(),setTimeout(f,0))},ve=function(e){null==e||e.stopPropagation(),ae?be():fe()},ge=function(){clearTimeout(me.current),me.current=setTimeout(fe,Z)},ye=function(e){null==e||e.preventDefault(),ve()},he=function(){clearTimeout(me.current),me.current=setTimeout(be,ee)},Oe=function(){de&&q&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},we=function(){de&&q&&(document.getElementsByTagName("body")[0].style.overflow="auto")},je=function(){var e,t=null==le||null===(e=le.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null==n||n.focus()};Object(o.useImperativeHandle)(t,(function(){return{open:function(){fe()},close:function(){be()},toggle:function(){ve()}}}));var Ee,ke,Ce=function(){if(!de&&ae&&(null==ce?void 0:ce.current)&&(null==ce?void 0:ce.current)&&(null==le?void 0:le.current)){var e,t,n=ce.current.getBoundingClientRect(),o=le.current.getBoundingClientRect(),r=s(n,o,Y,_,{offsetX:K,offsetY:G},ne);if(le.current.style.top=r.top+window.scrollY+"px",le.current.style.left=r.left+window.scrollX+"px",_&&ue.current)ue.current.style.transform=r.transform,ue.current.style.setProperty("-ms-transform",r.transform),ue.current.style.setProperty("-webkit-transform",r.transform),ue.current.style.top=(null===(e=D.top)||void 0===e?void 0:e.toString())||r.arrowTop,ue.current.style.left=(null===(t=D.left)||void 0===t?void 0:t.toString())||r.arrowLeft}};Ee=be,void 0===(ke=P)&&(ke=!0),Object(o.useEffect)((function(){if(ke){var e=function(e){"Escape"===e.key&&Ee()};return document.addEventListener("keyup",e),function(){ke&&document.removeEventListener("keyup",e)}}}),[Ee,ke]),function(e,t){void 0===t&&(t=!0),Object(o.useEffect)((function(){if(t){var n=function(t){if(9===t.keyCode){var n,o=null==e||null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(o);if(1===r.length)return void t.preventDefault();var a=r[0],i=r[r.length-1];t.shiftKey&&document.activeElement===a?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),a.focus())}};return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}}),[e,t])}(le,ae&&de),function(e,t){void 0===t&&(t=!0),Object(o.useEffect)((function(){if(t){var n=function(){e()};return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}}),[e,t])}(Ce,x),function(e,t,n){void 0===n&&(n=!0),Object(o.useEffect)((function(){if(n){var o=function(n){var o=Array.isArray(e)?e:[e],r=!1;o.forEach((function(e){e.current&&!e.current.contains(n.target)||(r=!0)})),n.stopPropagation(),r||t()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),function(){n&&(document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o))}}}),[e,t,n])}(a?[le,ce]:[le],be,k&&!j);var xe,Ne=function(){return r.a.createElement("div",Object.assign({},(e=de?l.popupContent.modal:l.popupContent.tooltip,t={className:"popup-content "+(""!==z?z.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:c({},e,A,{pointerEvents:"auto"}),ref:le,onClick:function(e){e.stopPropagation()}},!F&&R.indexOf("hover")>=0&&(t.onMouseEnter=ge,t.onMouseLeave=he),t),{key:"C",role:de?"dialog":"tooltip",id:se.current}),_&&!de&&r.a.createElement("div",{ref:ue,style:l.popupArrow},r.a.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==z?z.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:c({position:"absolute"},D)},r.a.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),oe&&"function"==typeof oe?oe(be,ae):oe);var e,t},Pe=!(R.indexOf("hover")>=0),Te=de?l.overlay.modal:l.overlay.tooltip,Re=[Pe&&r.a.createElement("div",{key:"O","data-testid":"overlay","data-popup":de?"modal":"tooltip",className:"popup-overlay "+(""!==z?z.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:c({},Te,I,{pointerEvents:k&&j||de?"auto":"none"}),onClick:k&&j?be:void 0,tabIndex:-1},de&&Ne()),!de&&Ne()];return r.a.createElement(r.a.Fragment,null,function(){for(var e={key:"T",ref:ce,"aria-describedby":se.current},t=Array.isArray(R)?R:[R],n=0,o=t.length;n<o;n++)switch(t[n]){case"click":e.onClick=ve;break;case"right-click":e.onContextMenu=ye;break;case"hover":e.onMouseEnter=ge,e.onMouseLeave=he;break;case"focus":e.onFocus=ge,e.onBlur=he}if("function"==typeof a){var i=a(ae);return!!a&&r.a.cloneElement(i,e)}return!!a&&r.a.cloneElement(a,e)}(),ae&&i.a.createPortal(Re,(null===(xe=document.getElementById("popup-root"))&&((xe=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(xe)),xe)))}));t.a=m},85:function(e,t,n){"use strict";var o=n(0),r=n.n(o);n(48),n(49);t.a=function(e){return function(){return r.a.createElement("div",{className:"example-warper"},r.a.createElement(e,null))}}}}]);